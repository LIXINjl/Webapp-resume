<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <title>李鑫简历</title>
    <link charset="utf-8" rel="stylesheet" href="css/reset.min.css"/>
    <link charset="utf-8"  rel="stylesheet" href="css/swiper.min.css"/>
    <link charset="utf-8"  rel="stylesheet" href="css/index.css"/>
    <style>
        .wave {
            width: 100px;
            height: 100px;
            overflow: hidden;
            border-radius: 50%;
            background: rgba(255, 203, 103, .6);
            margin: 100px auto;
            position: relative;
            text-align: center;
            display: table-cell;
            vertical-align: middle;
        }

        .wave span {
            display: inline-block;
            color: #fff;
            font-size: 20px;
            position: relative;
            z-index: 2;
        }

        .wave canvas {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 1;
        }
    </style>
</head>
<body>
<section class="music move" id="music">
    <audio src="" id="musicAudio" preload="none" loop/>
</section>
<section class="swiper-container">
    <div class="swiper-wrapper">
        <div class="swiper-slide page1">
            <img src="img/1page-1_03.png"/>
            <img src="img/1page-1_04.png"/>
            <img src="img/1page-1_05.png"/>
            <img src="img/1page-1_06.png"/>
            <img src="img/1page-1_07.png"/>
            <img src="img/1page-1_08.png"/>
            <img src="img/1page-1_09.png"/>
            <!--<img src="img/1page-1_10.png"/>-->
            <!--<img src="img/1page-1_11.png"/>-->
            <!--<img src="img/1page-1_12.png"/>-->
            <div id="wave" class="wave"><span>60%</span></div>
            <div id="wave1" class="wave"><span>50%</span></div>
            <div id="wave2" class="wave"><span>10%</span></div>
        </div>

        <div class="swiper-slide page2">
            <img src=""/>
            <img src=""/>
            <img src=""/>
            <img src=""/>
        </div>
    </div>
</section>

<script charset="utf-8"  type="text/javascript" src="js/swiper.min.js"></script>
<script charset="utf-8"  type="text/javascript" src="js/fastClick.js"></script>
<script charset="utf-8"  type="text/javascript" src="js/index.js"></script>
<script>
    /*var wave = (function () {
        var ctx;
        var waveImage;
        var canvasWidth;
        var canvasHeight;
        var needAnimate = false;

        function init(callback,id) {
            var wave1 = document.getElementById(id);
            var canvas = document.createElement('canvas');
            if (!canvas.getContext) return;
            ctx = canvas.getContext('2d');
            canvasWidth = wave1.offsetWidth;
            canvasHeight = wave1.offsetHeight;
            canvas.setAttribute('width', canvasWidth);
            canvas.setAttribute('height', canvasHeight);
            wave1.appendChild(canvas);
            waveImage = new Image();
            waveImage.onload = function () {
                waveImage.onload = null;
                callback();
            };
            waveImage.src = 'images/wave.png';
        }

        function animate(n) {
            var waveX = 0;
            var waveY = 0;
            var waveX_min = -203;
            var waveY_max = canvasHeight * 0.6;
            var requestAnimationFrame =
                    window.requestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.msRequestAnimationFrame ||
                    function (callback) {
                        window.setTimeout(callback, 1000 / n);
                    };

            function loop() {
                ctx.clearRect(0, 0, canvasWidth, canvasHeight);
                if (!needAnimate) return;
                if (waveY < waveY_max) waveY += 1.5;
                if (waveX < waveX_min) waveX = 0; else waveX -= 3;

                ctx.globalCompositeOperation = 'source-over';
                ctx.beginPath();
                ctx.arc(canvasWidth / 2, canvasHeight / 2, canvasHeight / 2, 0, Math.PI * 2, true);
                ctx.closePath();
                ctx.fill();

                ctx.globalCompositeOperation = 'source-in';
                ctx.drawImage(waveImage, waveX, canvasHeight - waveY);

                requestAnimationFrame(loop);
            }

            loop();
        }

        function start(n,id) {
            if (!ctx) return init(start,id);
            needAnimate = true;
            setTimeout(function () {
                if (needAnimate) animate(n);
            }, 500);
        }

        function stop() {
            needAnimate = false;
        }

        return {start: start, stop: stop};
    }());*/
    function Wave() {
        var ctx;
        var waveImage;
        var canvasWidth;
        var canvasHeight;
        var needAnimate = false;

        function init(callback,id) {
            var wave1 = document.getElementById(id);
            var canvas = document.createElement('canvas');
            if (!canvas.getContext) return;
            ctx = canvas.getContext('2d');
            canvasWidth = wave1.offsetWidth;
            canvasHeight = wave1.offsetHeight;
            canvas.setAttribute('width', canvasWidth);
            canvas.setAttribute('height', canvasHeight);
            wave1.appendChild(canvas);
            waveImage = new Image();
            waveImage.onload = function () {
                waveImage.onload = null;
                callback();
            };
            waveImage.src = 'images/wave1.png';
        }

        function animate(n) {
            var waveX = 0;
            var waveY = 0;
            var waveX_min = -203;
            var a=n/100;
            var waveY_max = canvasHeight * a;
            var requestAnimationFrame =
                    window.requestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.msRequestAnimationFrame ||
                    function (callback) {
                        window.setTimeout(callback, 1000 / n);
                    };

            function loop() {
                ctx.clearRect(0, 0, canvasWidth, canvasHeight);
                if (!needAnimate) return;
                if (waveY < waveY_max) waveY += 1.5;
                if (waveX < waveX_min) waveX = 0; else waveX -= 1.5;/*水波的速度*/

                ctx.globalCompositeOperation = 'source-over';
                ctx.beginPath();
                ctx.arc(canvasWidth / 2, canvasHeight / 2, canvasHeight / 2, 0, Math.PI * 2, true);
                ctx.closePath();
                ctx.fill();

                ctx.globalCompositeOperation = 'source-in';
                ctx.drawImage(waveImage, waveX, canvasHeight - waveY);

                requestAnimationFrame(loop);
            }

            loop();
        }

        function start(n,id) {
            if(n){
                setTimeout(function () {
                    if (needAnimate) animate(n);
                }, 500);
            }

            if (!ctx) return init(start,id);
            needAnimate = true;


        }

        function stop() {
            needAnimate = false;
        }

        return {start: start, stop: stop};
    }
    //wave.start(60,"wave");
    var fn=new Wave;
    var fn1=new Wave;
    var fn2=new Wave;
    fn.start(60,"wave");
    fn1.start(30,"wave1");
    fn2.start(10,"wave2");
    /*wave.start(50,"wave1");*/
</script>
</body>
</html>